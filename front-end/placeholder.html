<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title> GreenLytics API test graf</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <!--//chart.js loaded.-->
</head>

<body>
  <h1> GreenLytics API placeholder graph </h1>

  <a href="http://127.0.0.1:8080/resourceManagement.html"><button style="border-radius:10px;">
      Go back to Resource management
    </button></a>
  </button></a>
    </button></a>
    <br></br>
    <br></br>
    <hr />

<canvas id="chart" width="800" height="200"> </canvas>

  <script>
    const url = 'http://35.228.239.24/api/v1/project/1'

    chartNow();
    async function chartNow() {
      const data = await getData();
      const ctx = document.getElementById('chart').getContext('2d');

      const myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.xs,
          datasets: [{
            label: 'Placeholder graph',
            data: data.ys,
            fill: true,
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)'
            ],
            borderColor: 'rgba(255, 99, 132, 1)',
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                callback: function(value, index, values) {
                  return '' + value + "";
                  //beginAtZero : true;
                }
                  // beginAtZero: true;
              }
            }]
          }
        }
      });
    }

    async function getData() {
      const xs = [];
      const ys = [];
      const response = await fetch(url);
      const data = await response.json();
      console.log(data);
      const result = data.result;
      console.log(result);
      const yAxis = Object.values(result);
      const xAxis = Object.keys(result);
      console.log(xAxis);
      console.log(yAxis);
      for (var i = 0; i < 24; i ++){
        xs.push(xAxis[i]);
      }
      console.log(xs);
      for(var i = 0; i < 24; i++){
        ys.push(yAxis[i]);
      }
      return {
        xs,
        ys
      };
    }

    getData();

    // const placeHolder_api_url = ''
    //
    // async function getData() {
    //   const response = await fetch(placeHolder_api_url);
    // }
    console.log("hej");
  </script>
</body>

</html>
